(function(g){function n(a,b){for(var d=b.showFun,f=b.cut,e=b.name.split("."),h=0,k=a;e.length>h&&k;)k=k[e[h]],h++;d&&"function"==typeof d?(k=d(k,a),"string"==typeof k&&(k=g("\x3cspan\x3e\x3c/span\x3e").html(k).attr("title",k))):k=f?g("\x3cspan\x3e\x3c/span\x3e").html(k).cut(f):g("\x3cspan\x3e\x3c/span\x3e").html(k).attr("title",k);return k}_lazyAjax={};var l={getOrigin:function(){var a=location.origin;if(a)return a;if("string"==typeof location)return a=location.split("://")[0],a+=locations=location.split("://")[1].split("/")[0];if("object"==typeof location)return location.protocol&&location.host?a=location.protocol+"//"+location.host:""},getServerName:function(){return localStorage.getItem("tvuMeService")||"/tvumeservice"},setServerName:function(a){a=a||"";location.pathname||(location.pathname=location.toString().replace(/[^:]*:\/\/[^\/]+/g,""));a=location.pathname.substr(0,location.pathname.lastIndexOf("/"))+a;localStorage.setItem("tvuMeService",a)},getRootUrl:function(){return l.getOrigin()+l.getServerName()},transHtmlToDom:function(a){a=a.replace(/^\s*([\S\s]*)\b\s*$/,"$1");var b=document.createElement("DIV");b.innerHTML=a;if(1==b.childNodes.length)return b.removeChild(b.firstChild);for(a=document.createDocumentFragment();b.firstChild;)a.appendChild(b.firstChild);return a},lazyAjax:function(a,b){var d=a.url+JSON.stringify(a.data||{});_lazyAjax[d]?_lazyAjax[d].data?a.success(_lazyAjax[d].data):_lazyAjax[d].success.push(a.success):(_lazyAjax[d]={},_lazyAjax[d].success=[a.success],a.success=function(a){_lazyAjax[d].data=a;for(var e=0;e<_lazyAjax[d].success.length;e++)_lazyAjax[d].success[e](a);_lazyAjax[d].success.length=0;b&&setTimeout(function(){_lazyAjax[d]=null},b)},l.ajax(a))},repeatAjax:function(a,b){var d=a.oldSuccess||a.success;a.oldSuccess=d;var f=(new Date).getTime();b.minFailedTime=b.minFailedTime||1;b.minFailedTime--;b.maxTime=b.maxTime||0;b.isSuccess=b.isSuccess||function(a){return!0};b.fail=b.fail||function(a){return!0};b.minInterval=b.minInterval||0;a.success=function(e){b.isSuccess(e)?d(e):(e=(new Date).getTime()-f,b.maxTime=b.maxTime+f-(new Date).getTime(),0<b.maxTime?e<b.minInterval?window.setTimeout(function(){l.repeatAjax(a,b)},b.minInterval-e):l.repeatAjax(a,b):0<b.minFailedTime?e<b.minInterval?window.setTimeout(function(){l.repeatAjax(a,b)},b.minInterval-e):l.repeatAjax(a,b):b.fail())};l.ajax(a)},requirejs:function(a,b){g.getScript(a,function(a,f,e){"success"==f&&(eval(a),b&&b())})},repeatGet:function(a){a.minFailedTime=a.minFailedTime||1;a.minFailedTime--;a.maxTime=a.maxTime||0;a.isSuccess=a.isSuccess||function(a){return!0};a.fail=a.fail||function(a){return!0};a.minInterval=a.minInterval||0},postUrl:function(a,b,d){var f=localStorage.getItem("sessionId");f&&(d=d||{},d.sessionId=d.sessionId||f);var e=a.split("?"),f="";if(1<e.length)for(a=1;a<e.length;a++)f=1==a?e[a]:f+("?"+e[a]);for(b=g("\x3cform\x3e\x3c/form\x3e").attr("action",e[0]).attr("target",b||"_self").attr("method","post");0<=f.indexOf("\x26amp;");)f=f.replace(/&amp;/g,"\x26");f=f.split("\x26");if(0<f.length)for(a=0;a<f.length;a++)if((e=f[a])||1<e.split("\x3d").length){var h=e.indexOf("\x3d"),e=g("\x3cinput\x3e",{type:"hidden",name:e.substr(0,h),value:e.substr(h+1)});b.append(e)}if(d)for(pro in d)e=g("\x3cinput\x3e",{type:"hidden",name:pro,value:d[pro]}),b.append(e);b.appendTo("body");b.submit();b.remove()},drawFiveStar:function(a,b,d,f){for(var e=0;e<a;e++)g("\x3cspan\x3e\x3c/span\x3e").attr("class","glyphicon glyphicon-star").appendTo(d);for(e=a;e<b;e++)g("\x3cspan\x3e\x3c/span\x3e").attr("class","glyphicon glyphicon-star grayStay").appendTo(d);f&&"NaN"!==parseFloat(f).toString()&&(d.css({transform:"scale("+f+")"}),d[0].style.transformOrigin||d.css({"transform-origin":"5% 50%"}));return d},createFiveStar:function(a,b,d,f){f=f||24;d=d||1;var e=g("\x3cdiv\x3e\x3c/div\x3e").css({width:100*(1/d+.5)+"%","text-align":"left"});f=g("\x3cdiv\x3e\x3c/div\x3e").css({display:"inline-block",overflow:" hidden","text-align":"left",width:b*f*d+"px"});for(var h=0;h<a;h++)g("\x3cspan\x3e\x3c/span\x3e").attr("class","glyphicon glyphicon-star").appendTo(e);for(h=a;h<b;h++)g("\x3cspan\x3e\x3c/span\x3e").attr("class","glyphicon glyphicon-star grayStay").appendTo(e);e.css({"transform-origin":"0 50%"});e.css({transform:"scale("+d+")"});return f.append(e)},createStars:function(a,b,d,f){f=f||1.3;var e=1.3-f;d=d||1;var h=g("\x3cdiv\x3e\x3c/div\x3e").css({width:100*(1/d+.5)+"%","text-align":"left"});f=g("\x3cdiv\x3e\x3c/div\x3e").css({display:"inline-block","vertical-align":"middle",overflow:" hidden","text-align":"left",width:b*f*d+"em"});for(var k=0;k<a;k++)g("\x3cspan\x3e\x3c/span\x3e").attr("class","iconfont-star").css({"margin-right":-e+"em"}).appendTo(h);for(k=a;k<b;k++)g("\x3cspan\x3e\x3c/span\x3e").attr("class","iconfont-star-empty").css({"margin-right":-e+"em"}).appendTo(h);h.css({"transform-origin":"0 50%"});h.css({transform:"scale("+d+")"});return f.append(h)},drawInfoTable:function(a,b,d,f,e){var h=b.cols;"function"==typeof b.bean&&(d=new b.bean(d));a="string"==typeof a?g(a):a;if(!d||!h||0==h.length)return a;a=g("\x3ctable\x3e\x3c/table\x3e").attr("class","infoTable").appendTo(a);for(var k=0;k<h.length;k++)b=g("\x3ctr\x3e\x3c/tr\x3e"),g("\x3ctd\x3e\x3c/td\x3e").append(h[k].show?h[k].show+":":"\x26nbsp;").width(f).appendTo(b),g("\x3ctd\x3e\x3c/td\x3e").html(n(d,h[k])).appendTo(b),b.appendTo(a),e&&b.find("td").css({"padding-bottom":e})},addInfoTableTitle:function(a,b){g(a).prepend(g("\x3cdiv\x3e\x3c/div\x3e").html(b).attr("class","infoTableTitle"))},drawInfoList:function(a,b,d,f){function e(a,b,d){b&&(a.click(function(){b(d)}),a.css({cursor:"pointer"}))}a=g(a);content=a.html("");content.addClass("tempTable");for(var h=b.cols,k=g("\x3cdiv\x3e\x3c/div\x3e").attr("class","top row"),m=0;m<h.length;m++)g("\x3cdiv\x3e\x3c/div\x3e").attr("class","col-md-"+(h[m].space?h[m].space:"1")).html(h[m].show).appendTo(k).css({width:h[m].percentage?h[m].percentage+"%":""});k.appendTo(content);for(var l=0;l<d.length;l++){for(var k=g("\x3cdiv\x3e\x3c/div\x3e").attr("class","row"),p=b.bean?new b.bean(d[l]):d[l],m=0;m<h.length;m++){var q=n(p,h[m]);g("\x3cdiv\x3e\x3c/div\x3e").attr("class","col-md-"+(h[m].space?h[m].space:"1")).append(q).appendTo(k).css({width:h[m].percentage?h[m].percentage+"%":""})}e(k,b.callBack,p);k.appendTo(content)}f&&f(a,b,d)},ajax:function(a){var b=localStorage.getItem("sessionId");b?(a.data=a.data||{},a.data.sessionId=a.data.sessionId||b):a.data.sessionId="";var d=a.success;a.success=function(a){var b=a||{};if("string"==typeof a)try{b=JSON.parse(a)}catch(g){}if(b.isRedirect)if(page&&page.stopRedirect)page.initManager&&(page.initManager.execute("loginit"),page.loginCallBack.execute("loginCallBack"));else if(b.redirectUrl){window.open(l.getOrigin()+l.getServerName()+b.redirectUrl,"_self");return}d&&d(a)};g.ajax(a)},delayButton:function(a,b,d,f){if(0==b)a.removeAttribute("disabled"),b=60,a.innerHTML==d&&(a.innerHTML=f||a.innerHTML);else return a.setAttribute("disabled",!0),f=f||a.innerHTML,d=a.innerHTML=d||a.innerHTML,setTimeout(function(){l.delayButton(a,0,d,f)},b)},fixToTop:function(a,b){a=g(a);var d=a.offset().top,f=a.innerWidth();g(window).scroll(function(){var e=g(this).scrollTop();e>d-b?window.XMLHttpRequest?a.css({position:"fixed",top:b+"px",width:f}):a.css({top:e,"margin-top":b+"px"}):a.css({position:"relative",width:"",top:0})})},loadGoogleMap:function(a){FeishiUtil.loadScript?FeishiUtil.loadScript("bom.beans.map",function(){bom.beans.map.loadGoogleMap(a)}):bom.beans.map.loadGoogleMap(a)},alert:function(a,b,d){var f=g("\x3cdiv\x3e\x3c/div\x3e").css({width:"100%",height:"100%",position:"fixed",top:"0",left:"0","font-size":"18px","z-index":"9999","background-color":"transparent"}),e=g("\x3cdiv\x3e\x3c/div\x3e").css({position:"absolute",left:"50%",top:"50%",background:"#FFF","min-width":"250px","min-width":"450px",padding:"0 15px 15px 15px","border-radius":"8px","box-shadow":"0 0 20px 0px #555"});b=g("\x3cdiv\x3e\x3c/div\x3e").css({"line-height":"1.4em",padding:" 0.5em 0 0.5em 0"}).html(b?b:"Notice").attr("class","titleInfo");a=g("\x3cdiv\x3e\x3c/div\x3e").css({background:"#FFF","line-height":"1.4em",padding:"15px 0 2.8em 0","word-wrap":"break-word","font-weight":"700"}).html(a);var h=g("\x3cbutton\x3e\x3c/button\x3e").attr("class","btn").html("Confirm").css({"float":"right",padding:"0 0.8em","border-radius":"8em","line-height":"1.8em"}).click(function(){f.remove();"function"==typeof d&&d()});f.appendTo(g("body")).append(e.append(b).append(g("\x3cdiv\x3e\x3c/div\x3e").attr({"class":"breakLine"})).append(a).append(h));e.css({"margin-left":-e.width()/2+"px","margin-top":-e.height()/2+"px"})},confirm:function(a,b,d,f){var e=g("\x3cdiv\x3e\x3c/div\x3e").css({width:"100%",height:"100%",position:"fixed","font-size":"18px",top:"0",left:"0","z-index":"9999","background-color":"transparent"}),h=g("\x3cdiv\x3e\x3c/div\x3e").css({position:"absolute",left:"50%",top:"50%",background:"#FFF","min-width":"250px","min-width":"450px",padding:"0 15px 15px 15px","border-radius":"8px","box-shadow":"0 0 20px 0px #555"});b=g("\x3cdiv\x3e\x3c/div\x3e").css({"line-height":"1.4em",padding:" 0.5em 0 0.5em 0"}).html(b?b:"Confirm").attr("class","titleInfo");a=g("\x3cdiv\x3e\x3c/div\x3e").css({background:"#FFF","line-height":"1.4em",padding:"15px 0 2.8em 0","word-wrap":"break-word","font-weight":"700"}).html(a);var k=g("\x3cbutton\x3e\x3c/button\x3e").attr("class","btn").html("Cancel").css({"float":"right"}).click(function(){e.remove();"function"==typeof f&&f()}),l=g("\x3cbutton\x3e\x3c/button\x3e").attr("class","btn").html("Confirm").css({"float":"right","margin-right":"15px"}).click(function(){e.remove();"function"==typeof d&&d()});e.appendTo(g("body")).append(h.append(b).append(g("\x3cdiv\x3e\x3c/div\x3e").attr({"class":"breakLine"})).append(a).append(k).append(l));h.css({"margin-left":-h.width()/2+"px","margin-top":-h.height()/2+"px"})}};window.FeishiUtil=window.FeishiUtil||{};(function(a,b){for(c in b)a[c]=b[c]})(FeishiUtil,l)})(jQuery);